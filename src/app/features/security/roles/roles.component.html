<div class="roles-container">
  <mat-toolbar color="primary">
    <span>{{ 'security.roles.title' | translate}}</span>
    <span class="spacer"></span>
    <button mat-raised-button color="accent" (click)="openAddRole()" [disabled]="!canCreateRole">
      <mat-icon>add</mat-icon>
      {{ 'security.roles.title' | translate }}
    </button>
  </mat-toolbar>

  <!-- Loading Spinner -->
  @if (isLoading) {
    <div class="loading-container">
      <mat-spinner diameter="50"></mat-spinner>
      <p>{{ 'common.loading' | translate }}</p>
    </div>
  }

  <!-- Roles Table -->
  @if (!isLoading) {
    <div class="table-container">
      <table mat-table [dataSource]="roles" class="mat-elevation-z2">

        <!-- ID Column -->
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef class="id-column">
            {{ 'security.roles.id' | translate }}
          </th>
          <td mat-cell *matCellDef="let role" class="id-column">
            {{ role.id }}
          </td>
        </ng-container>

        <!-- Role Name Column -->
        <ng-container matColumnDef="roleName">
          <th mat-header-cell *matHeaderCellDef class="roleName-column">
            {{ 'security.roles.roleName' | translate }}
          </th>
          <td mat-cell *matCellDef="let role" class="roleName-column">
            {{ role.roleName }}
          </td>
        </ng-container>

        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>
            {{ 'common.actions' | translate }}
          </th>

          <td mat-cell *matCellDef="let role">
            <!-- Edit -->
            <button
              mat-icon-button
              color="primary"
              (click)="editRole(role)"
              [disabled]="!canUpdateRole"
              [matTooltip]="'common.edit' | translate">
              <mat-icon>edit</mat-icon>
            </button>

            <!-- Remove -->
            <button
              mat-icon-button
              color="warn"
              (click)="removeRole(role)"
              [disabled]="!canDeleteRole"
              [matTooltip]="'common.delete' | translate">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>


        <!--        &lt;!&ndash; Permissions Column &ndash;&gt;-->
<!--        <ng-container matColumnDef="permissions">-->
<!--          <th mat-header-cell *matHeaderCellDef class="permissions-column">-->
<!--            {{ 'security.roles.permissions' | translate }}-->
<!--          </th>-->
<!--          <td mat-cell *matCellDef="let role" class="permissions-column">-->
<!--            {{ formatPermissions(role.permissions) }}-->
<!--          </td>-->
<!--        </ng-container>-->

        <!-- Header and Row Definitions -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      </table>
    </div>
  }
</div>
